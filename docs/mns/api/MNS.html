

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MNS &mdash; kafka docs v2019.07.23 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="MQ" href="MQ.html" />
    <link rel="prev" title="Account" href="Account.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../contents.html" class="icon icon-home"> kafka docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../kafka/index.html">kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kafka-node/index.html">Kafka-node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kafka-node/index.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kafka-node/index.html#features">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kafka-node/index.html#install-kafka">Install Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kafka-node/index.html#license-mit">LICENSE - “MIT”</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../node-rdkafka/index.html">node-rdkafka - Node.js wrapper for Kafka C/C++ library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aliyun/index.html">消息队列 Kafka</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">mns api</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../aliyun-mns.html">消息服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ali-mns.html">ali-mns (ali-mqs)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">mns api</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Account.html">Account</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MNS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mns-account-account-region-string-region">MNS(account:Account, region?:string|Region)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mqs-account-account-region-string-region">MQS(account:Account, region?:string|Region)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mns-listp-prefix-string-pagesize-number-pagemarker-string">mns.listP(prefix?:string, pageSize?:number, pageMarker?:string)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mns-createp-name-string-options-any">mns.createP(name:string, options?:any)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mns-deletep-name-string">mns.deleteP(name:string)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="MQ.html">MQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="MQBatch.html">MQBatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="Msg.html">Msg</a></li>
<li class="toctree-l3"><a class="reference internal" href="Region.html">Region</a></li>
<li class="toctree-l3"><a class="reference internal" href="Subscription.html">Subscription</a></li>
<li class="toctree-l3"><a class="reference internal" href="Topic.html">MNSTopic</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">kafka docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">mns api</a> &raquo;</li>
        
          <li><a href="index.html">mns api</a> &raquo;</li>
        
      <li>MNS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/mns/api/MNS.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mns">
<h1>MNS<a class="headerlink" href="#mns" title="永久链接至标题">¶</a></h1>
<div class="section" id="mns-account-account-region-string-region">
<h2>MNS(account:Account, region?:string|Region)<a class="headerlink" href="#mns-account-account-region-string-region" title="永久链接至标题">¶</a></h2>
<p>The <em>MNS</em> operate the mns queue.</p>
<p>account: An account object.</p>
<p>region: String|Region, optional. If it is string, it can be “hangzhou”,
“beijing” or any Chinese datacenter city name. If it is Region, it
allows you to specify data center other than in China. Default is
“hangzhou”. It can also be internal or vpc address “hangzhou-internal”,
“beijing-internal” or “qingdao-internal-vpc”.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">AliMNS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;ali-mns&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">account</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AliMNS</span><span class="p">.</span><span class="nx">Account</span><span class="p">(</span><span class="s2">&quot;&lt;your-account-id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;your-key-id&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;your-key-secret&gt;&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mns</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AliMNS</span><span class="p">.</span><span class="nx">MNS</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="s2">&quot;hangzhou&quot;</span><span class="p">);</span>
<span class="c1">// or</span>
<span class="kd">var</span> <span class="nx">regionJapan</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AliMNS</span><span class="p">.</span><span class="nx">Region</span><span class="p">(</span><span class="nx">AliMNS</span><span class="p">.</span><span class="nx">City</span><span class="p">.</span><span class="nx">Japan</span><span class="p">,</span> <span class="nx">AliMNS</span><span class="p">.</span><span class="nx">NetworkType</span><span class="p">.</span><span class="nx">Public</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mnsJapan</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AliMNS</span><span class="p">.</span><span class="nx">MNS</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">regionJapan</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="mqs-account-account-region-string-region">
<h2>MQS(account:Account, region?:string|Region)<a class="headerlink" href="#mqs-account-account-region-string-region" title="永久链接至标题">¶</a></h2>
<p>Same as MNS. For compatible v1.x.</p>
</div>
<div class="section" id="mns-listp-prefix-string-pagesize-number-pagemarker-string">
<h2>mns.listP(prefix?:string, pageSize?:number, pageMarker?:string)<a class="headerlink" href="#mns-listp-prefix-string-pagesize-number-pagemarker-string" title="永久链接至标题">¶</a></h2>
<p>List all of the queue in a data center.</p>
<p>prefix: String, optional. Return only mq with the prefix.</p>
<p>pageSize: number, optional. How many mns will be returned in a page,
1~1000, default is 1000.</p>
<p>pageMarker: String, optional. Request the next page, the value is
returned in last call.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">mns</span><span class="p">.</span><span class="nx">listP</span><span class="p">(</span><span class="s2">&quot;my&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">mns</span><span class="p">.</span><span class="nx">listP</span><span class="p">(</span><span class="s2">&quot;my&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">Queues</span><span class="p">.</span><span class="nx">NextMarker</span><span class="p">);</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">dataP2</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dataP2</span><span class="p">);</span>
<span class="p">},</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="mns-createp-name-string-options-any">
<h2>mns.createP(name:string, options?:any)<a class="headerlink" href="#mns-createp-name-string-options-any" title="永久链接至标题">¶</a></h2>
<p>Create a mq.</p>
<p>name: String. The queue name.</p>
<p>options: optional. The queue attributes.</p>
<p>options.DelaySeconds: number. How many seconds will the messages be
visible after sent. 0~604800(7days), default is 0.</p>
<p>options.MaximumMessageSize: number. How many bytes could the message be.
1024(1k)~65536, default is 65536(64k).</p>
<p>options.MessageRetentionPeriod: number. How many seconds will the
messages live, 60~1296000(15days), default is 345600(4days).</p>
<p>optiions.VisibilityTimeout: number. How many seconds will the message
keep invisible after be received, 1~43200(12hours), default is 30.</p>
<p>options.PollingWaitSeconds: numer. How many seconds will the receive
request wait for if mq is empty. 0~30, default is 0.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">mns</span><span class="p">.</span><span class="nx">createP</span><span class="p">(</span><span class="s2">&quot;myAliMQ&quot;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">DelaySeconds</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">MaximumMessageSize</span><span class="o">:</span> <span class="mi">65536</span><span class="p">,</span>
    <span class="nx">MessageRetentionPeriod</span><span class="o">:</span> <span class="mi">345600</span><span class="p">,</span>
    <span class="nx">VisibilityTimeout</span><span class="o">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="nx">PollingWaitSeconds</span><span class="o">:</span> <span class="mi">0</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
<p>If a mq with same name exists, calling createP will succeed only when
all of the mq attributes are all same. Any mismatched attributes will
cause an “QueueAlreadyExist” failure.</p>
</div>
<div class="section" id="mns-deletep-name-string">
<h2>mns.deleteP(name:string)<a class="headerlink" href="#mns-deletep-name-string" title="永久链接至标题">¶</a></h2>
<p>Delete an mq.</p>
<p>name: String. The queue name.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">mns</span><span class="p">.</span><span class="nx">deleteP</span><span class="p">(</span><span class="s2">&quot;myAliMQ&quot;</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="MQ.html" class="btn btn-neutral float-right" title="MQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Account.html" class="btn btn-neutral float-left" title="Account" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, BandCap

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>