

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>概观 &mdash; kafka docs v2019.07.23 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="用法" href="usage.html" />
    <link rel="prev" title="node-rdkafka - Node.js wrapper for Kafka C/C++ library" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../contents.html" class="icon icon-home"> kafka docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../kafka/index.html">kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka-node/index.html">Kafka-node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka-node/index.html#table-of-contents">Table of Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka-node/index.html#features">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka-node/index.html#install-kafka">Install Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kafka-node/index.html#license-mit">LICENSE - “MIT”</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">node-rdkafka - Node.js wrapper for Kafka C/C++ library</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">概观</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">参考文档</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">特约</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">行为准则</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">要求</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mac-os-high-sierra">Mac OS High Sierra</a></li>
<li class="toctree-l4"><a class="reference internal" href="#alpine">Alpine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usage.html">用法</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aliyun/index.html">消息队列 Kafka</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mns/index.html">mns api</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">kafka docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">node-rdkafka - Node.js wrapper for Kafka C/C++ library</a> &raquo;</li>
        
      <li>概观</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/node-rdkafka/overview.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>概观<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">node-rdkafka</span></code> library is a high-performance NodeJS client for
<a class="reference external" href="http://kafka.apache.org/">Apache Kafka</a> that wraps the native
<a class="reference external" href="https://github.com/edenhill/librdkafka">librdkafka</a> library. All the
complexity of balancing writes across partitions and managing (possibly
ever-changing) brokers should be encapsulated in the library.</p>
<p><strong>This library currently uses ``librdkafka`` version ``0.11.4``.</strong></p>
<div class="section" id="id2">
<h2>参考文档<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>To view the reference docs for the current version, go
<a class="reference external" href="https://blizzard.github.io/node-rdkafka/current/">here</a></p>
</div>
<div class="section" id="id3">
<h2>特约<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>For guidelines on contributing please see
<a class="reference external" href="https://github.com/blizzard/node-rdkafka/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a></p>
</div>
<div class="section" id="id4">
<h2>行为准则<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h2>
<p>Play nice; Play fair.</p>
</div>
<div class="section" id="id5">
<h2>要求<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li><p>Apache Kafka &gt;=0.9</p></li>
<li><p>Node.js &gt;=4</p></li>
<li><p>Linux/Mac</p></li>
<li><p>Windows?! See below</p></li>
<li><p>openssl 1.0.2</p></li>
</ul>
<div class="section" id="mac-os-high-sierra">
<h3>Mac OS High Sierra<a class="headerlink" href="#mac-os-high-sierra" title="永久链接至标题">¶</a></h3>
<p>OpenSSL has been upgraded in High Sierra and homebrew does not overwrite
default system libraries. That means when building node-rdkafka, because
you are using openssl, you need to tell the linker where to find it:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CPPFLAGS</span><span class="o">=</span>-I/usr/local/opt/openssl/include
<span class="nb">export</span> <span class="nv">LDFLAGS</span><span class="o">=</span>-L/usr/local/opt/openssl/lib
</pre></div>
</div>
<p>Then you can run <code class="docutils literal notranslate"><span class="pre">npm</span> <span class="pre">install</span></code> on your application to get it to build
correctly.</p>
<p><strong>NOTE:</strong> From the <code class="docutils literal notranslate"><span class="pre">librdkafka</span></code> docs</p>
<blockquote>
<div><p>WARNING: Due to a bug in Apache Kafka 0.9.0.x, the ApiVersionRequest
(as sent by the client when connecting to the broker) will be
silently ignored by the broker causing the request to time out after
10 seconds. This causes client-broker connections to stall for 10
seconds during connection-setup before librdkafka falls back on the
broker.version.fallback protocol features. The workaround is to
explicitly configure api.version.request to false on clients
communicating with &lt;=0.9.0.x brokers.</p>
</div></blockquote>
</div>
<div class="section" id="alpine">
<h3>Alpine<a class="headerlink" href="#alpine" title="永久链接至标题">¶</a></h3>
<p>Using Alpine Linux? Check out the
<a class="reference external" href="https://github.com/Blizzard/node-rdkafka/blob/master/examples/docker-alpine.md">docs</a>.</p>
</div>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="永久链接至标题">¶</a></h3>
<p>Installing <code class="docutils literal notranslate"><span class="pre">node-rdkafka</span></code> on Windows is now possible thanks to
<a class="reference external" href="https://github.com/Blizzard/node-rdkafka/pull/248">#248</a>. However,
it does require some special instructions.</p>
<p>You can read the <a class="reference external" href="https://github.com/edenhill/librdkafka/blob/master/README.win32">Librdkafka Windows
Instructions</a>
here. As it says in that document, you must be using Microsoft Visual
Studio 2013 to compile <code class="docutils literal notranslate"><span class="pre">librdkafka</span></code>. This is because a version of
openssl that is used requires this version of Visual Studio.</p>
<p>If you have multiple versions of Visual Studio on your machine you may
need to ensure that the correct MSBuild is called by node-gyp. For
whatever reason, gyp just uses the MSBuild in your path if there is one,
so you will need to ensure it resolves to the right place. The <code class="docutils literal notranslate"><span class="pre">bin</span></code>
directory for MSBuild will usually be similar to
<code class="docutils literal notranslate"><span class="pre">C:/Program</span> <span class="pre">Files</span> <span class="pre">(x86)/MSBuild/12.0/Bin/</span></code> so ensure it comes late in
your path.</p>
<p>Additionally, <code class="docutils literal notranslate"><span class="pre">librdkafka</span></code> requires a few dependencies be installed
via <code class="docutils literal notranslate"><span class="pre">nuget</span></code> before it will build properly on Windows. You will need to
<a class="reference external" href="https://www.nuget.org/downloads">download the nuget command line
tools</a> and make sure <code class="docutils literal notranslate"><span class="pre">nuget.exe</span></code>
is available in your path. It is recommended that you install the latest
stable version, as versions before <code class="docutils literal notranslate"><span class="pre">v4.3.0</span></code> did not always correctly
read dependencies.</p>
<p>Lastly, you may need to set the MS build tools gyp uses to the correct
version.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>node-gyp configure --msvs_version<span class="o">=</span><span class="m">2013</span>
</pre></div>
</div>
<p>After that it should compile!</p>
<p><strong>Note:</strong> I <em>still</em> do not recommend using <code class="docutils literal notranslate"><span class="pre">node-rdkafka</span></code> in
production on Windows. This feature was in high demand and is provided
to help develop, but we do not test against Windows, and windows support
may lag behind Linux/Mac support because those platforms are the ones
used to develop this library. Contributors are welcome if any Windows
issues are found :)</p>
</div>
</div>
<div class="section" id="id6">
<h2>测试<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>This project includes two types of unit tests in this project: *
end-to-end integration tests * unit tests</p>
<p>You can run both types of tests by using <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>. Doing so calls
<code class="docutils literal notranslate"><span class="pre">mocha</span></code> in your locally installed <code class="docutils literal notranslate"><span class="pre">node_modules</span></code> directory.</p>
<ul class="simple">
<li><p>Before you run the tests, be sure to init and update the submodules:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">init</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">submodule</span> <span class="pre">update</span></code></p></li>
</ol>
</li>
<li><p>To run the unit tests, you can run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">test</span></code>.</p></li>
<li><p>To run the integration tests, you must have a running Kafka
installation available. By default, the test tries to connect to
<code class="docutils literal notranslate"><span class="pre">localhost:9092</span></code>; however, you can supply the <code class="docutils literal notranslate"><span class="pre">KAFKA_HOST</span></code>
environment variable to override this default behavior. Run
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">e2e</span></code>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="usage.html" class="btn btn-neutral float-right" title="用法" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="node-rdkafka - Node.js wrapper for Kafka C/C++ library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, BandCap

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>